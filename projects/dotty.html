<!DOCTYPE html>
<head>
    <title>Dotty</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <style type="text/css">
        @supports (font: -apple-system-body) {
            html {
                font: -apple-system-body;
            }
        }
    </style>


    <link rel="stylesheet" href="https://unpkg.com/@sakun/system.css" />
    <link rel="stylesheet" href="/assets/css/dotty.css" />

    <link rel="icon" href="/images/dotty/logo.png" type="image/png" />
    <link rel="apple-touch-icon" href="/images/dotty/logo-ios.png" type="image/png" />
</head>
<body>
<ul role="menubar">
    <li role="menuitem" aria-haspopup="menu">
        <img src="/images/dotty/logo.png" class="pixel-icon" alt="Dotty" />
        <ul role="menu">
            <li role="menuitem">
                <a id="about" url="#">About Dotty... <span class="shortcut">⌘ ?</span></a>
            </li>
        </ul>
    </li>
    <li role="menuitem" aria-haspopup="menu">
        File
        <ul role="menu">
            <li role="menuitem">
                <a id="open-menu" url="#">Open... <span class="shortcut">⌘ O</span></a>
            </li>
            <li role="menuitem">
                <a id="new" url="#">New... <span class="shortcut">⌘ N</span></a>
            </li>
            <li role="menuitem">
                <a id="download" url="#">Download <span class="shortcut">⌘ S</span></a>
            </li>
            <li role="menuitem">
                <a id="export-menu" url="#">Export... <span class="shortcut">⌘ E</span></a>
            </li>
        </ul>
    </li>
    <li role="menuitem" aria-haspopup="menu">
        Edit
        <ul role="menu">
            <li role="menuitem">
                <a id="undo-menu" class="disabled" url="#" aria-disabled="true">Undo <span class="shortcut">⌘ Z</span></a>
            </li>
            <li role="menuitem">
                <a id="redo-menu" class="disabled" url="#" aria-disabled="true">Redo <span class="shortcut">⇧ ⌘ Z</span></a>
            </li>
            <hr role="separator" />
            <li role="menuitem">
                <a id="clear-menu" class="" url="#">Clear All</a>
            </li>
            <li role="menuitem">
                <a id="resize-menu" class="" url="#">Resize...</a>
            </li>
            
        </ul>
    </li>
    <li role="menuitem" aria-haspopup="menu">
        Palette
        <ul role="menu">
            <li role="menuitem" aria-haspopup="menu">
                <label>Limit Colours <span class="disclosure">&gt;</span></label>
                <ul role="menu">
                    <li role="menuitem">
                        <input name="palette-bit-mode" id="mode-cga" type="radio" value="cga" />
                        <label for="mode-cga">16 Colours (CGA)</label>
                    </li>
                    <li role="menuitem">
                        <input name="palette-bit-mode" id="mode-web" type="radio" value="web" />
                        <label for="mode-web">256 Colours (Websafe)</label>
                    </li>
                    <li role="menuitem">
                        <input name="palette-bit-mode" id="mode-gbc" type="radio" value="gbc" />
                        <label for="mode-gbc">Thousands (GBC)</label>
                    </li>
                    <li role="menuitem">
                        <input name="palette-bit-mode" id="mode-full" type="radio" value="full" checked />
                        <label for="mode-full">No Limit</label>
                    </li>
                </ul>
            </li>
            <li role="menuitem">
                <input id="palette-lock" type="checkbox" name="palette-lock" />
                <label for="palette-lock">Lock</label>
            </li>
            <li role="menuitem">
                <a id="clear-palette" class="" url="#">Clear</a>
            </li>
            <li role="menuitem">
                <a id="import-palette-menu" url="#">Import...</a>
            </li>
        </ul>
    </li>
    <li role="menuitem" aria-haspopup="menu">
        View
        <ul role="menu">
            <li role="menuitem">
                <a id="zoom-in-menu" class="" url="#">Zoom In <span class="shortcut">⌘ =</span></a>
            </li>
            <li role="menuitem">
                <a id="zoom-out-menu" class="" url="#">Zoom Out <span class="shortcut">⌘ -</span></a>
            </li>
            <li role="menuitem">
                <a id="zoom-fit-menu" class="" url="#">Zoom to Fit <span class="shortcut">⇧ ⌘ =</span></a>
            </li>
        </ul>
    </li>
</ul>

<div class="window palette tools">
    <fieldset class="tools">
        <legend>Tool</legend>
        <input id="pen" type="radio" name="tool" value="pen" checked>
        <label for="pen" class="btn radio-button"><img src="/images/dotty/pen.png" class="pixel-icon" alt="Pen, hotkey P" /></label>
        <input id="pencil" type="radio" name="tool" value="pencil">
        <label for="pencil" class="btn radio-button"><img src="/images/dotty/pencil.png" class="pixel-icon" alt="Pencil, hotkey B" /></label>
        <input id="bucket" type="radio" name="tool" value="bucket">
        <label for="bucket" class="btn radio-button"><img src="/images/dotty/bucket.png" class="pixel-icon" alt="Bucket, hotkey G" /></label>
        <input id="eraser" type="radio" name="tool" value="eraser">
        <label for="eraser" class="btn radio-button"><img src="/images/dotty/eraser.png" class="pixel-icon" alt="Eraser, hotkey E" /></label>
        <input id="dropper" type="radio" name="tool" value="dropper">
        <label for="dropper" class="btn radio-button"><img src="/images/dotty/dropper.png" class="pixel-icon" alt="Dropper, hotkey I" /></label>
        <input id="move" type="radio" name="tool" value="move">
        <label for="move" class="btn radio-button"><img src="/images/dotty/move.png" class="pixel-icon" alt="Move, hotkey M" /></label>
    </fieldset>

    <div class="actions">
        <button class="btn icon-button" id="undo-btn" disabled><img src="/images/dotty/undo.png" alt="Undo" /></button>
        <button class="btn icon-button" id="redo-btn" disabled><img src="/images/dotty/redo.png" alt="Redo" /></button>
        <button class="btn icon-button" id="zoom-out" aria-label="zoom out"><img src="/images/dotty/zoom-out.png" alt="-" /></button>
        <button class="btn icon-button" id="zoom-in" aria-label="zoom in"><img src="/images/dotty/zoom-in.png" alt="+" /></button>
        <button class="btn icon-button" id="zoom-reset" aria-label="zoom to fit"><img src="/images/dotty/zoom-fit.png" alt="=" /></button>
    </div>
</div>

<div class="window" id="win">
    <div class="title-bar" id="main-title">
        <h1 class="title">
            <span id="name">Dotty</span>—<span id="size"></span>
        </h1>
    </div>
    <div class="separator"></div>
    
    <div id="canvas-wrapper">
        <div id="inner-canvas">
            <canvas id="canvas" width="16" height="16"></canvas>
        </div>
    </div>
</div>


<div class="window palette colors" id="palette-box">
    <div class="active-color">
        <input type="color" id="color" aria-label="Color" />
        <label class="alpha"><input type="number" id="alpha" min="0" max="100" step="1" placeholder="opacity" value="100" aria-label="Opacity" />%</label>
    </div>
    <div class="color-history" id="color-history"></div>
</div>

<div class="window palette move" id="move-box">
    <div class="dpad">
        <button id="left-moving-button" class="btn dpad-button">◀︎</button>
        <div class="dpad-up-down">
            <button id="up-moving-button" class="btn dpad-button">▲</button>
            <button id="down-moving-button" class="btn dpad-button">▼</button>
        </div>
        <button id="right-moving-button" class="btn dpad-button">▶︎</button>
    </div>
    
    <button id="done-moving-button" class="btn">Done</button>
    <button id="cancel-moving-button" class="btn">Cancel</button>
</div>

<div class="modal-wrapper" id="modal-wrapper-new">
    <div class="modal-dialog outer-border">
        <div class="inner-border center">
            <div class="modal-contents">
                <h1 class="modal-text" style="text-align:center">New</h1>
  
                <div class="modal-grid">
                    <label class="modeless-text field-label" for="new-name">Name:</label>
                    <input type="text" value="My Cool Art" id="new-name" />
                    <label class="modeless-text field-label" for="new-preset">Presets:</label>
                    <select id="new-preset">
                        <option value="16">S - 16x16</option>
                        <option value="32">M - 32x32</option>
                        <option value="64">L - 64x64</option>
                        <option value="128">XL - 128x128</option>
                    </select>
                    <label for="new-width" class="modeless-text field-label">Width:</label>
                    <span class="field-label"><input id="new-width" type="number" value="16" max="256" /> px</span>
                    <label for="new-height" class="modeless-text field-label">Height:</label>
                    <span class="field-label"><input id="new-height" type="number" value="16" max="256" /> px</span>
                </div>

                <section class="field-row" style="justify-content: flex-end">
                    <button class="btn" id="new-cancel">Cancel</button>
                    <button class="btn" id="new-create">Create</button>
                </section>
            </div>
        </div>
    </div>
</div>


<div class="modal-wrapper" id="modal-wrapper-palette">
    <div class="modal-dialog outer-border">
        <div class="inner-border center">
            <div class="modal-contents">
                <h1 class="modal-text" style="text-align:center">Import Palette</h1>
  
                <div class="modal-grid">
                    <label class="modeless-text field-label" for="new-name">File:</label>
                    <input type="file" id="import-palette-file" accept=".png, image/png">
                </div>

                <div class="modal-text">
                    <span id="palette-error" class="modal-text"></span>
                </div>

                <div class="modal-grid" id="palette-import-chip-list">

                </div>

                <section class="field-row" style="justify-content: flex-end">
                    <button class="btn" id="import-palette-cancel">Cancel</button>
                    <button class="btn" id="import-palette-confirm">Apply</button>
                </section>
            </div>
        </div>
    </div>
</div>


<div class="modal-wrapper" id="modal-wrapper-open">
    <div class="modal-dialog outer-border">
        <div class="inner-border center">
            <div class="modal-contents">
                <h1 class="modal-text" style="text-align:center">Open File</h1>
  
                <div class="modal-grid">
                    <label class="modeless-text field-label" for="new-name">File:</label>
                    <input type="file" id="import-file" accept=".png, .jpeg, image/png, image/jpeg">
                </div>

                <div class="modal-grid">
                    <label class="modeless-text field-label">Preview:</label>
                    <img src="" id="import-preview" />
                </div>

                <div class="modal-text">
                    <span id="import-error" class="modal-text"></span>
                </div>

                <section class="field-row" style="justify-content: flex-end">
                    <button class="btn" id="import-cancel">Cancel</button>
                    <button class="btn" id="import-confirm">Open</button>
                </section>
            </div>
        </div>
    </div>
</div>

<div class="modal-wrapper" id="modal-wrapper-export">
    <div class="modal-dialog outer-border">
        <div class="inner-border center">
            <div class="modal-contents">
                <h1 class="modal-text" style="text-align:center">Export</h1>
  
                <div class="modal-grid">
                    <fieldset class="field-label export-size-grid">
                        <legend>Size, at least:</legend>
                        <input id="export-size-small" type="radio" name="export-size" value="256">
                        <label for="export-size-small">256px wide - Small, for forums</label>
                        <input id="export-size-medium" type="radio" name="export-size" value="1080" checked>
                        <label for="export-size-medium">1080px wide - Medium, for social media</label>
                        <input id="export-size-large" type="radio" name="export-size" value="2480">
                        <label for="export-size-large">2480px wide - Large, for printing</label>
                    </fieldset>
                </div>

                <section class="field-row" style="justify-content: flex-end">
                    <button class="btn" id="export-cancel">Cancel</button>
                    <button class="btn" id="export-confirm">Export</button>
                </section>
            </div>
        </div>
    </div>
</div>

<div class="modal-wrapper" id="modal-wrapper-resize">
    <div class="modal-dialog outer-border">
        <div class="inner-border center">
            <div class="modal-contents">
                <h1 class="modal-text" style="text-align:center">Resize</h1>
  
                <div class="modal-grid">
                    <label for="resize-width" class="modeless-text field-label">Width:</label>
                    <span class="field-label"><input id="resize-width" type="number" value="16" max="256" /> px</span>
                    <label for="resize-height" class="modeless-text field-label">Height:</label>
                    <span class="field-label"><input id="resize-height" type="number" value="16" max="256" /> px</span>
                    <fieldset class="field-label resize-mode-grid">
                        <legend>From</legend>
                        <input id="resize-mode-top-left" type="radio" name="resize" value="top-left">
                        <label for="resize-mode-top-left">Top Left</label>
                        <span></span>
                        <input id="resize-mode-top-right" type="radio" name="resize" value="top-right">
                        <label for="resize-mode-top-right">Top Right</label>
                        <span></span>
                        <input id="resize-mode-center-center" type="radio" name="resize" value="center-center" checked>
                        <label for="resize-mode-center-center">Center</label>
                        <span></span>
                        <input id="resize-mode-bottom-left" type="radio" name="resize" value="bottom-left">
                        <label for="resize-mode-bottom-left">Bottom Left</label>
                        <span></span>
                        <input id="resize-mode-bottom-right" type="radio" name="resize" value="bottom-right">
                        <label for="resize-mode-bottom-right">Bottom Right</label>
                    </fieldset>
                </div>

                <div class="modal-text">Warning: This action cannot be undone! If your new size is smaller than your curren size, you might loose data!</div>

                <section class="field-row" style="justify-content: flex-end">
                    <button class="btn" id="resize-cancel">Cancel</button>
                    <button class="btn" id="resize-confirm">Resize</button>
                </section>
            </div>
        </div>
    </div>
</div>

<div class="modal-wrapper" id="modal-wrapper-about">
    <div class="modal-dialog outer-border">
        <div class="inner-border center">
            <h1 class="modal-header" style="text-align:center">About Dotty</h1>
            <div class="modal-contents">
                <img src="/images/dotty/logo.png" class="pixel-icon" alt="Dotty" />
                <div class="description">
                    <p class="modeless-text">Download your work to save it!
                    <p class="modeless-text">Inspired by <a href="https://en.wikipedia.org/wiki/MacPaint">MacPaint</a>, thank you Bill Atkinson.
                    <p class="modeless-text">©️2022. Made using plain JavaScript, poor choices, and <a href="https://sakofchit.github.io/system.css">System.css</a>
                </div>
            </div>
        </div>
    </div>
</div>

<template id="color-chip">
    <button class="btn icon-button color-chip"></button>
</template>

<template id="color-palette-chip">
    <div class="color-chip"></div>
</template>

<script src="/assets/js/classy-dotty.js" type="module"></script>
</body>
